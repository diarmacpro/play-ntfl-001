# Laporan Perubahan Kode pada `new_index.php`

## Deskripsi
Perubahan dilakukan pada file `new_index.php` untuk meningkatkan kejelasan dan keamanan interaksi tombol aksi pada halaman detail Surat Jalan (SJ). Kini, hanya tombol untuk status "Acc Manager" yang aktif dan dapat diklik, sedangkan tombol untuk status lain seperti "Proses WH" dan "Acc Finish" selalu dalam keadaan disabled dan tidak dapat diklik. Selain itu, tampilan tombol juga diperjelas agar user mengetahui tombol tidak dapat digunakan.

## Tujuan
- Mencegah user melakukan aksi pada status selain "Acc Manager".
- Membuat tampilan tombol lebih informatif dengan perubahan kursor dan style.
- Menghilangkan event click pada tombol yang tidak digunakan.

---

## Before (Sebelum Perubahan)
- Tombol aksi dapat diaktifkan untuk beberapa status, dan event click masih terpasang pada semua status.
- Tampilan tombol tidak membedakan secara jelas antara status aktif dan non-aktif.

**Contoh kode sebelum:**
```javascript
if (stts === '-') {
  $('#btnAksi').prop('disabled', false).show();
  // ...
} else {
  $('#btnAksi').prop('disabled', true).show();
  // ...
}
```

---

## After (Setelah Perubahan)
- Tombol aksi hanya aktif untuk status "Acc Manager".
- Untuk status lain, tombol disabled, event click dihapus, kursor menjadi `not-allowed`, dan style lebih transparan.

**Contoh kode sesudah:**
```javascript
if (stts === '-') {
  $('#btnAksi').prop('disabled', false)
    .css({'cursor':'pointer', 'opacity':'1'})
    .show();
  $('#btnAksi').off('click').on('click', function(){ btnAksiPlay(this); });
  // ...
} else {
  $('#btnAksi').prop('disabled', true)
    .css({'cursor':'not-allowed', 'opacity':'0.6'})
    .show();
  $('#btnAksi').off('click');
  // ...
}
```

**Penjelasan:**
- `.prop('disabled', true)` dan `.css({'cursor':'not-allowed', 'opacity':'0.6'})` membuat tombol tidak bisa diklik dan tampil tidak aktif.
- `.off('click')` memastikan event click dihapus dari tombol non-aktif.
- Hanya status "Acc Manager" yang dapat menjalankan aksi.

---

## Tindakan
- Refactor fungsi `btnAksiOlahElement` untuk mengatur status tombol dan event click.
- Menambahkan perubahan style pada tombol untuk status non-aktif.
- Menghapus kemungkinan aksi pada status selain "Acc Manager".

---

## Hasil / Kesimpulan
- User tidak dapat melakukan klik pada tombol selain status "Acc Manager".
- Tampilan tombol lebih jelas, sehingga user tidak bingung mana tombol yang bisa digunakan.
- Kode lebih aman dan sesuai dengan kebutuhan bisnis.

---

## Contoh Pemanggilan API (Untuk Back-End)

**Endpoint:**
```
GET https://app.weva.my.id/api/acc-mg?id_sj={ID_SJ}&id_m={ID_MANAGER}
```

**Contoh:**
```
GET https://app.weva.my.id/api/acc-mg?id_sj=SJ12345&id_m=MG001
```

**Response:**
- `1` : Berhasil ACC Manager
- `0` : Gagal ACC Manager

---

**Catatan:**
Perubahan ini memastikan hanya proses ACC Manager yang dapat dilakukan dari halaman ini, dan user tidak dapat melakukan aksi pada status lain. Tampilan tombol juga lebih informatif dan user-friendly.
